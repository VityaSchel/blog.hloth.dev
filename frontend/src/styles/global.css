@import "tailwindcss";

@custom-variant hf (&:where(&:hover, &:focus-visible));

@custom-variant tall-screen {
	@media screen and (min-height: 670px) and (width < 768px) {
		@slot;
	}
}

@theme inline {
	--color-cream: #f3f1e6;
	--color-golden: #f1c470;
	--color-sandy: #d5c18e;
	--color-sandy-alt: #a89870;
	--color-golden-creamy: #8e7a48;
	--color-cream-alt: #e0d9c9;
	--color-black-alt: #333333;
	--color-inverted: #585858;
	--color-inverted-alt: #2f2f2f;
	--color-inverted-alt-dark: #978d62;
	--color-active: #a3e635;
	--color-active-dark: white;
	--breakpoint-xs: 24rem;
	--font-default-sans-serif:
		system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
		Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
	--font-default-serif:
		"PT Serif", Cambria, Cochin, Georgia, "Times New Roman", Times, serif;
	--font-serif: "Source Serif 4 Variable", var(--font-default-serif);
	--font-text: var(--font-default-sans-serif);
	--font-display: "PP Mori", var(--font-text);
	--tracking-tightest: -0.06em;
	--font-mono:
		Menlo, Consolas, DejaVu Sans Mono, ui-monospace, SFMono-Regular, Monaco,
		Liberation Mono, Courier New, monospace;
}

:root {
	background-color: var(--bg);
	color: var(--text);
	font-family: var(--font-text);
	text-rendering: geometricPrecision;
	-webkit-font-smoothing: antialiased;
	color-scheme: light dark;

	--bg: var(--color-cream);
	--text: #000000;
	--theme-switch-day: #000000;
	--theme-switch-night: #293760;
	--text-alt: #121212;
	--page-height: 100%;
}

@media (prefers-color-scheme: dark) {
	:root {
		--bg: #000000;
		--text: var(--color-sandy);
		--theme-switch-day: var(--color-sandy);
		--theme-switch-night: #a3965f;
		--text-alt: var(--sandy-alt);
	}
	.footer-text:not(:has(:focus-visible)) {
		opacity: 1;
		animation-name: footer-text-animation;
		animation-timing-function: ease-in;
		animation-duration: 1ms;
		animation-direction: alternate;
		animation-fill-mode: backwards;
		animation-timeline: scroll(root);
		animation-range: calc(var(--page-height) - 50vh) var(--page-height);
		box-shadow: inset 0 0vh 0px 0px rgba(0, 0, 0, 0);
	}
	@keyframes footer-text-animation {
		from {
			opacity: 0.2;
			box-shadow: inset 0 60vh 20px 0px rgba(0, 0, 0, 0.25);
		}

		to {
			opacity: 1;
			box-shadow: inset 0 0vh 0px 0px rgba(0, 0, 0, 0);
		}
	}
	.astro-code,
	.astro-code span {
		color: var(--shiki-dark) !important;
		background-color: var(--shiki-dark-bg) !important;
		font-style: var(--shiki-dark-font-style) !important;
		font-weight: var(--shiki-dark-font-weight) !important;
		text-decoration: var(--shiki-dark-text-decoration) !important;
	}
}

@property --blur {
	syntax: "<length>";
	initial-value: 0px;
	inherits: true;
}

body:has(dialog[open]) {
	overflow: hidden;
}

.banner-clip {
	mask-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 567 349" xmlns="http://www.w3.org/2000/svg"><path d="M0 60C0 31.7157 0 17.5736 8.7868 8.7868C17.5736 0 31.7157 0 60 0H507C535.284 0 549.426 0 558.213 8.7868C567 17.5736 567 31.7157 567 60V289C567 317.284 567 331.426 558.213 340.213C549.426 349 535.284 349 507 349H60C31.7157 349 17.5736 349 8.7868 340.213C0 331.426 0 317.284 0 289V60Z"/></svg>');
}

@media (width >= 48rem) {
	.banner-clip {
		mask-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 567 349" xmlns="http://www.w3.org/2000/svg"><path d="M0 96C0 62.3968 0 45.5953 6.53961 32.7606C12.292 21.4708 21.4708 12.292 32.7606 6.53961C45.5953 0 62.3969 0 96 0H471C504.603 0 521.405 0 534.239 6.53961C545.529 12.292 554.708 21.4708 560.46 32.7606C567 45.5953 567 62.3968 567 96V253C567 286.603 567 303.405 560.46 316.239C554.708 327.529 545.529 336.708 534.239 342.46C521.405 349 504.603 349 471 349H96C62.3969 349 45.5953 349 32.7606 342.46C21.4708 336.708 12.292 327.529 6.53961 316.239C0 303.405 0 286.603 0 253V96Z"/></svg>');
	}
}

.optical-sizing-force {
	font-optical-sizing: auto;
	font-variation-settings: "opsz" 1;
}

.optical-sizing-none {
	font-optical-sizing: none;
	font-variation-settings: "opsz" 0;
}

.one-storey-a {
	font-feature-settings: "ss02" 1;
}

.article-content {
	figure {
		padding: 16px 0;
		display: block;

		figcaption {
			color: var(--text-alt);
			font-size: 13px;
			margin-top: 16px;
			overflow-wrap: break-word;
		}
	}

	:is(h1, h2, h3, h4, h5, h6) {
		font-family: var(--font-serif);
		padding: 0;
		line-height: 1.5;
	}

	:is(h1, h2, h3) {
		@apply font-semibold;
	}

	:is(h4, h5, h6) {
		@apply font-medium;
	}

	h1 {
		@apply mt-9 mb-4 text-4xl;
	}

	h2 {
		@apply mt-7 mb-3 text-3xl;
	}

	h3 {
		@apply mt-6 mb-2 text-2xl;
	}

	h4 {
		@apply text-xl;
	}

	h5 {
		@apply text-lg;
	}

	h6 {
		@apply text-base;
	}

	p:not(:only-child):not(:where(blockquote > p)) {
		margin: 16px 0;
		overflow-wrap: break-word;
		padding: 0;
		line-height: 24px;
	}

	hr {
		@apply w-full border-none;

		&:not(&.asterisk) {
			@apply my-[60px] h-[2px] bg-black dark:bg-sandy;
		}

		&.asterisk {
			@apply relative h-16;
			&::before {
				display: block;
				position: absolute;
				content: "***";
				font-size: 30px;
				letter-spacing: 0.2em;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%);
				height: 32px;
			}
		}
	}

	pre {
		display: block;
		font-size: 14px;
		white-space: pre;
		overflow: auto;
		word-break: break-word;
		font-family: var(--font-mono);
		border-radius: 8px;
		padding: 16px 0;
		line-height: normal;
		margin: 16px 0;

		code {
			border-radius: 12px;
			display: block;
		}

		&:has(.toggle-wrap:checked) code {
			white-space: pre-wrap;
			word-break: break-word;
			white-space: pre-wrap;
		}

		&:not(:has(.toggle-wrap:checked)) {
			overflow-x: auto;
			overscroll-behavior-x: none;
			scrollbar-width: thin;
			code {
				width: max-content;
				min-width: 100%;
			}
		}

		&,
		* {
			line-height: 21px;
		}

		.line {
			width: 100%;
			padding: 0 1rem;
			min-height: 21px;
			border: solid transparent;
			border-width: 2px 0px 2px 0px;
			border-color: transparent;
			background-color: inherit;
			user-select: auto;
			display: inline-block;

			&:hover {
				border-color: rgba(180, 180, 180, 0.25);

				/* & > span:first-child {
					color: white;
					} */
			}
			@media (prefers-color-scheme: dark) {
				&:hover {
					border-color: rgba(62, 62, 62, 0.35);
				}
			}
		}

		&:has(.toggle-wrap:checked) .line {
			word-break: break-all;
		}
	}

	ul {
		list-style-type: disc;
	}

	ol {
		list-style-type: decimal;
	}

	ul,
	ol {
		padding-inline-start: 32px;
		padding-top: 0px;
		padding-bottom: 0px;
		padding-inline-end: 0px;
		display: flex;
		flex-direction: column;
		gap: 8px;

		&:not(:where(ul ul, ol ol, ul ol, ol ul)) {
			margin: 16px 0;
		}
	}

	blockquote {
		border-left: 2px solid var(--text);
		padding-left: 30px;
		margin: 32px 0;
		font-family: var(--font-serif);

		p:not(:has(cite)) {
			font-style: italic;
			font-weight: 500;
			font-size: 31px;
			font-feature-settings:
				"liga" 1,
				"clig" 1,
				"calt" 1,
				"dlig" 0;
			line-height: 1.15;
			/* transform: scaleY(1.1); */

			&::before {
				content: "“";
				font-size: 36px;
				vertical-align: middle;
				margin-right: 6px;
			}

			&::after {
				content: "”";
				font-size: 36px;
				vertical-align: bottom;
				margin-left: 3px;
			}
		}

		p:has(cite) {
			margin-top: 30px;
			font-size: 18px;
		}
	}

	kbd {
		display: inline-block;
		padding: 4px;
		font-family: var(--font-mono);
		font-size: 11px;
		line-height: 10px;
		color: light-dark(#1f2328, #f0f6fc);
		vertical-align: middle;
		background-color: light-dark(#f6f8fa, #151b23);
		border: solid 1px light-dark(#d1d9e0b3, #3d444db3);
		border-radius: 6px;
		box-shadow: inset 0 -1px 0 light-dark(#d1d9e0b3, #3d444db3);
	}
}

li[data-sonner-toast] {
	--border-radius: 100px;

	&[data-styled="true"] {
		padding: 6px 11px;

		[data-icon] {
			width: 32px;
			height: 32px;
			margin-right: 0;

			svg {
				width: 100%;
				height: 100%;
			}
		}
	}
}
