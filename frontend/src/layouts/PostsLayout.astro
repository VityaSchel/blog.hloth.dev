---
import AppBar from "$components/AppBar.astro";
import Separator from "$ui/Separator.astro";
import PostPreview from "$components/post/PostPreview.astro";
import HlothBlogSvg from "$components/HlothBlogSvg.astro";
import type { CollectionEntry } from "astro:content";

interface Props {
	posts: CollectionEntry<"blog">[];
}

let { posts } = Astro.props;
---

<AppBar />
<HlothBlogSvg />
<a
	id="posts"
	href="#posts"
	aria-hidden="true"
	tabindex={-1}
	class="invisible"
	aria-label="Posts"
>
</a>
<section class="mt-[60px]">
	{
		posts.length ? (
			<ul class="list-none">
				{posts.map(({ id, data }, i) => (
					<>
						<li>
							<PostPreview {id} post={data} first={i === 0} />
						</li>
						{i !== posts.length - 1 && <Separator />}
					</>
				))}
			</ul>
		) : (
			<div class="flex h-64 w-full flex-col items-center justify-center gap-4 text-[24.5px]">
				<span class="font-text tracking-normal">No posts yet</span>
				<img src="/no.gif" alt="🙂‍↔️" />
				<a
					href="/#posts"
					class="rounded-full border px-4 text-base font-medium"
				>
					Show all posts
				</a>
			</div>
		)
	}
</section>

{
	Boolean(posts.length) && (
		<a
			href="/#posts"
			class="rounded-full border px-4 text-base font-medium shrink-0 mt-12 self-center"
		>
			Show all posts
		</a>
	)
}
