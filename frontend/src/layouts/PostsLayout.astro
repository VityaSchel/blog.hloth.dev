---
import type { CollectionEntry } from "astro:content";
import AppBar from "$components/AppBar.astro";
import Separator from "$ui/Separator.astro";
import PostPreview from "$components/post/PostPreview.astro";
import HlothBlogSvg from "$components/HlothBlogSvg.astro";
import ShowAllPostsButton from "$ui/ShowAllPostsButton.astro";

interface Props {
	posts: CollectionEntry<"blog">[];
	category?: boolean;
}

let { posts, category = false } = Astro.props;
---

<AppBar />
<HlothBlogSvg />
<a
	id="posts"
	href="#posts"
	aria-hidden="true"
	tabindex={-1}
	class="invisible"
	aria-label="Posts"
>
</a>
<section class="mt-[60px]">
	{
		posts.length ? (
			<ul class="list-none">
				{posts.map(({ id, data }, i) => (
					<li>
						<PostPreview {id} post={data} first={i === 0} />
						{i !== posts.length - 1 && <Separator />}
					</li>
				))}
			</ul>
		) : (
			<div class="flex h-64 w-full flex-col items-center justify-center gap-4 text-[24.5px]">
				<span class="font-text tracking-normal">No posts yet</span>
				<img src="/no.gif" alt="ðŸ™‚â€â†”ï¸" />
				{category && <ShowAllPostsButton />}
			</div>
		)
	}
</section>

{
	Boolean(posts.length) && category && (
		<ShowAllPostsButton class="mt-12 shrink-0 self-center" />
	)
}
